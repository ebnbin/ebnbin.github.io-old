# 高阶函数和 lambda 表达式

### 1. View.setOnClickListener

### 2. 闭包

闭包，lambda 可以访问在外部作用域中声明的变量。与 Java 不同的是 Kotlin 可以修改闭包中捕获的变量

### 3. SAM 转换

SAM 转换，即 Single Abstract Method Conversions，就是对于只有单个非默认抽象方法接口的转换 —— 对于符合这个条件的接口（称之为 SAM Type ），在 Kotlin 中可以直接用 Lambda 来表示 —— 当然前提是 Lambda 的所表示函数类型能够跟接口的中方法相匹配。

SAM 转换歧义消除

条件：只支持 Java 转换、只支持接口，不支持抽象类。

### 4. 高阶函数

高阶函数是将函数用作参数或返回值的函数。

### 5. lambda 表达式

一个 lambda 表达式或匿名函数是一个“函数字面值”，即一个未声明的函数， 但立即做为表达式传递。

lambda 表达式总是括在花括号中，完整语法形式的参数声明放在花括号内，并有可选的类型标注，函数体跟在一个 -> 符号之后。如果推断出的该 lambda 的返回类型不是 Unit，那么该 lambda 主体中的最后一个（或可能是单个）表达式会视为返回值。

lambda 表达式总是括在花括号中；
其参数（如果有的话）在 -> 之前声明（参数类型可以省略）；
函数体（如果存在的话）在 -> 后面。

在 Kotlin 中有一个约定，如果函数的最后一个参数是一个函数，并且你传递一个 lambda 表达式作为相应的参数，你可以在圆括号之外指定它

如果 lambda 是该调用的唯一参数，则调用中的圆括号可以完全省略。

如果函数字面值只有一个参数， 那么它的声明可以省略（连同 ->），其名称是 it

如果 lambda 表达式的参数未使用，那么可以用下划线取代其名称

匿名函数的返回类型推断机制与正常函数一样：对于具有表达式函数体的匿名函数将自动推断返回类型，而具有代码块函数体的返回类型必须显式指定（或者已假定为 Unit）。

### 6. 匿名函数

请注意，匿名函数参数总是在括号内传递。 允许将函数留在圆括号外的简写语法仅适用于 lambda 表达式。

Lambda表达式与匿名函数之间的另一个区别是非局部返回的行为。一个不带标签的 return 语句总是在用 fun 关键字声明的函数中返回。这意味着 lambda 表达式中的 return 将从包含它的函数返回，而匿名函数中的 return 将从匿名函数自身返回。

### 7. 返回与跳转

### 8. Scoping 函数

在 Kotlin 的 Standard.kt 中提供了一些特殊的高阶函数

它们被称作 Scoping 函数，此类函数通过使用一个函数 block，将你需要对某对象进行的一系列操作限制在 lambda 作用域内；

这样，对于该对象操作的代码就不会泄露到外层作用域，使得代码更为干净整洁。


